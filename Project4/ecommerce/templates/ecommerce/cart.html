{% extends 'ecommerce/main.html' %}
{% load static %}
{% block content %}

	<div class='row my-5'>
		<div class='col-12'>
			<h3>Carrinho</h3>
		</div>
	</div>
	{% if not items %}
		<div class='box-element p-4'>
			<div class='row mb-5'>
				<div class='col-12'>
					Seu carrinho está vazío
				</div>
			</div>
			<div class='row'>
				<div class='col-6'>
					<a class="btn btn-outline-warning" href="{% url 'home' %}">Logar</a>
				</div>
				<div class='col-6'>
					<a class="btn btn-outline-dark" href="{% url 'home' %}">Cadastre-se</a>
				</div>
			</div>
		</div>		
	{% else %}
		<div class="row mb-5">
			<div class="col-lg-12">
				<div class="box-element">
					<div class="row mb-5">
						<div class="col-lg-12">
							<a class="btn btn-outline-dark" href="{% url 'home' %}">Continue Comprando</a>
						</diV>
					</div>
					<div class="row mb-5">
						<div class="col">
							<h5>Items: <strong>{{ order.total_items }}</strong></h5>
						</div>
						<div class="col-6">
							<h5 class="m-0">Total: <strong>R$ {{ order.get_cart_total|floatformat:2  }}</strong></h5>
						</div>
						<div class="col">
							<a style="float:right; margin:5px;" class="btn btn-success" href="{% url 'checkout' %}">Finalizar Compra</a> 
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<div class="box-element">
					<table class="table">
						<thead>
							<tr>
								<th scope="col">Item</th>
								<th scope="col">Preço</th>
								{% comment %} <th scope="col">Total</th> {% endcomment %}
							</tr>
						</thead>
						<tbody>
							{% for item in items %}
								<tr>
									<td><img class="row-image" src="{{ item.product.imagensURL }}"></td>
									<td>{{ item.product.price|floatformat:2 }}</td>
									{% comment %} <td>{{ item.get_total }}</td> {% endcomment %}
								</tr>
							{% endfor %}
						</tbody>
					</table>
					{% comment %} <div class="cart-row">
						<div style="flex:2"></div>
						<div style="flex:2"><strong>Item</strong></div>
						<div style="flex:1"><strong>Price</strong></div>
						<div style="flex:1"><strong>Total</strong></div>                
					</div> 
					{% for item in items %}
						<div class="cart-row">
							<div style="flex:2"><img class="row-image" src="{{ item.product.imagensURL }}"></div>
							<div style="flex:2"><p>{{ item.product.name }}</p></div>
							<div style="flex:1"><p>${{ item.product.price|floatformat:2 }}</p></div> 
							<div style="flex:1"><p>${{ item.get_total }}</p></div>  
						</div> 
					{% endfor %}        {% endcomment %}
				</div>
			</div>
		</div> 
	{% endif %}           

{% endblock content %}    